<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROJECT 2: CALCULATOR</title>
    <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" integrity="sha512-ZnR2wlLbSbr8/c9AgLg3jQPAattCUImNsae6NHYnS9KrIwRdcY9DxFotXhNAKIKbAXlRnujIqUWoXXwqyFOeIQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css" integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e" crossorigin="anonymous">
    <link href="vendor/fontawesome/css/all.css" rel="stylesheet">
    <style>
        .calc-btn{
            color: aliceblue;
            height: 60px;
            width: 60px;
            background-color: rgb(26, 55, 112);
            border-width: 1px;
            border-color: black;
        }
        .calc-display{
            background-color: rgb(57, 6, 105);
            color: orange;
            height: 100px;
            width: 320px;
            border-radius: 5px;
            border-width: 2px;
            border-color: black;
        }
        .inputString{
            margin-top: 5px;
            height: 20px ;
            display: block ;
            font-size: 20px;
        }
        .expressionString{
            margin-top: 5px;
            height: 20px ;
            display: block ;
            font-size: 20px;
        }
        .valueString{
            margin-top: 5px;
            height: 20px ;
            display: block ;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="container p-4">
        <div class="d-flex justify-content-center ">
            <div class="col-sm-12 col-md-4 col-lg-4">
                <div class="card" style="border-width:5px; border-color: rgb(0, 0, 0); background-color: rgb(168, 205, 237);">
                    <div class="d-flex justify-content-center align-item-center p-3">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3 calc-display">
                                <div id="number_div" class="inputString">0</div>
                                <div id="expression" class="expressionString"></div>
                                <div id="value_div" class="valueString"></div>
                            </div>
                            <input type="hidden" id="savedExpression">
                        </div>
                    </div>
                    <hr style="border-width: 5px;">
                    <div class="d-flex justify-content-center align-item-center p-2">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3 ">
                                <button type="button" class="btn btn-danger calc-btn" data-event_key="Delete">AC</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-danger calc-btn" data-event_key="Backspace"><i class="bi bi-x-square"></i></button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-warning calc-btn " data-event_key="%" ><i class="fa-solid fa-percent"></i></button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-warning calc-btn" data-event_key="/"><i class="fa-solid fa-divide"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-item-center p-2">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="7">7</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3 ">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="8">8</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-primary calc-btn"data-event_key="9">9</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-warning calc-btn" data-event_key="*"><i class="fa-solid fa-xmark"></i></button>
                            </div>
                        </div>
                    </div>    
                    <div class="d-flex justify-content-center align-item-center p-2">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="4">4</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3 ">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="5">5</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="6">6</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-warning calc-btn" data-event_key="-"><i class="fa-solid fa-minus"></i></button>
                            </div>
                        </div>
                    </div>    
                    <div class="d-flex justify-content-center align-item-center p-2">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="1">1</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3 ">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="2">2</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key="3">3</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-warning calc-btn" data-event_key="+"><i class="fa-solid fa-plus"></i></button>
                            </div>
                        </div>
                    </div>        
                    <div class="d-flex justify-content-center align-item-center p-2">
                        <div class="row">
                            <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6 ">
                                <button type="button" class="btn btn-primary calc-btn" style="width: 150px;" data-event_key="0">0</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-primary calc-btn" data-event_key=".">.</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-success calc-btn" data-event_key="="><i class="fa-solid fa-equals"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="vendor/bootstrap/js/bootstrap.js"></script>
    <script>

        
           
        
        $(document).on('keydown',function(e){
            console.log(e)
            $('button[data-event_key="'+e.key+'"]').addClass('active')
            if(e.keyCode>=48 && e.keyCode<=57){
                appendNumber(e.key)
            }else{
                if(e.key == '+' || e.key == '-' || e.key == '*' || e.key == '/' || e.key == '%' ){
                    generateExpression(e.key);
                }else if(e.key =='='|| e.key=='Enter'){
                    evaluateExpression()
                }
            }
            console.log(e.key);
        })
        $(document).on('keyup',function(e){
            $('button[data-event_key="'+e.key+'"]').removeClass('active')
            if (e.key === 'Delete') {
                clearCalc();
            }else if (e.key === 'Backspace') {
                clearString();
            }
        })

        
        $('.calc-btn').on('click',function(e){
            var key = $(this).data('event_key')
            if(key!= '+' && key!= '-' && key!= '*' && key!= '/'  && key!= '=' && key!= '%' && key!= 'Delete' && key!= 'Backspace'){
                appendNumber(key)
            }else{
                if(key == '+' || key == '-' || key == '*' || key == '/' || key == '%'){
                    generateExpression(key);
                }else if(key=='='){
                    evaluateExpression()
                }else if (key === 'Delete') {
                    clearCalc();
                }else if (key === 'Backspace') {
                    clearString();
                }
            }
            console.log(key);
        })

        function appendNumber(number){
            var existingNumber = $("#number_div").html();
            console.log(existingNumber);
            var currentString = number;
            var outputString = '';
            if(existingNumber != '' && existingNumber != undefined && existingNumber != null ){
                if(existingNumber=='0'){
                    outputString=number
                }else{
                    outputString = existingNumber +=currentString
                }
            }else{
                outputString = currentString;
            }
            $('#number_div').html(outputString);
        }

        function generateExpression(operator){
            var existingNumber = $("#number_div").html();
            var currentOperator = operator;
            var expression = '';
            var savedExpression = $("#savedExpression").val();
            if(savedExpression == '' && savedExpression == null && savedExpression == undefined){
                expression = parseInt(existingNumber) + operator
            }else{
                expression = savedExpression + existingNumber + operator;
            }
            $("#number_div").html("")
            $("#savedExpression").val(expression)
            $("#expression").html(expression)        
        }

        function evaluateExpression(){
            var res="";
            var result="";
            var expression = $("#savedExpression").val();
            var existingNumber = $("#number_div").html();
            if (existingNumber != '' && existingNumber != undefined && existingNumber != null ){
                expression = expression + parseFloat(existingNumber);
                $("#expression").html(expression)
            }
            
            res = eval(expression);
            result = "= " + eval(expression);
            $("#savedExpression").val("")
            $("#number_div").html(res)
            $("#value_div").html(result)
        }

        function clearCalc(){
            $("#number_div").html("0")
            $("#savedExpression").val("")
            $("#expression").html("") 
            $("#value_div").html("")
        }

        function clearString() {
            var existingNumber = $("#number_div").html();
            if (existingNumber.length > 0) {
                var updatedNumber = existingNumber.slice(0, -1); 
                $("#number_div").html(updatedNumber);
            }
        }
        
    </script>
</body>
</html>

